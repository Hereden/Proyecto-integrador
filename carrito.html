<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="icon" href="/assets/images/TR L.ico">
  <title>TlacuaRiders</title>
</head>

<body>
  <div id="nav-placeholder"></div>
  <h1 class="texto_70 text-center" >C a r r i t o</h1>
  <div id="tabla-carrito">

  </div>

  <br />
  
  <div class="row container">
    <br />
    <button id="vercarrito">Console log</button>
    <button id="limpiarcarrito">Limpiar log</button>
    <p class="texto_150">Total: $45,408.99</p>
    <a href="CheckBox.html">
      <button class="
            btn btn-outline-secondary
            my-2 my-sm-0
            texto_50
            boton_amarillo
            align-self-center
          ">
        Pagar
      </button>
    </a>
  </div>
  <br />
  <div class="card mb-3 bg_black">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img src="assets/images/bicisNinos/bici02.jpg" alt="" style="width: 100%; height: 400px; opacity: 0.5" />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title texto_70">
            Bicicleta Ghost Revenge R29 Verde
          </h5>
          <p class="card-text texto_30 font_footer_text">
            Cuenta con palanca de cambios Shimano de 21 velocidades. Doble
            freno de disco. Rines de pared aerodinámico.
          </p>
          <p class="card-text texto_white texto_70 align-self-center">
            $6499.00
          </p>
          <button class="
                btn btn-outline-secondary
                my-2 my-sm-0
                texto_50
                boton_amarillo
                align-self-center
              ">
            Borrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3 bg_black">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img src="assets/images/BicisPista/BP4.jpg" alt="" style="width: 100%; height: 400px; opacity: 0.5" />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title texto_70">Cannondale Synapse Meteor Gray</h5>
          <p class="card-text texto_30 font_footer_text">
            La bicicleta Synapse Disc es ligera, rueda suave y te permite una
            posición deportiva pero cómoda para que tus salidas sean más
            largas, rápidas y frecuentes, es la opción más versátil para salir
            a rodar e incluso para ir a trabajar.
          </p>
          <p class="card-text texto_white texto_70 align-self-center">
            $36990.00
          </p>
          <button class="
                btn btn-outline-secondary
                my-2 my-sm-0
                texto_50
                boton_amarillo
                align-self-center
              ">
            Borrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3 bg_black">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img src="assets/images/Cascos/C1.jpg" alt="" style="width: 100%; height: 400px; opacity: 0.5" />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title texto_70">Casco de bicicleta de montaña</h5>
          <p class="card-text texto_30">
            Casco deportivo extremo, casco de MTB cara completa de seguridad
            desmontable, utilizado para la bicicleta de carretera de montaña.
          </p>
          <p class="card-text texto_white texto_70 align-self-center">
            $1620.00
          </p>
          <button class="
                btn btn-outline-secondary
                my-2 my-sm-0
                texto_50
                boton_amarillo
                align-self-center
              ">
            Borrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3 bg_black">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img src="assets/images/Guantes/g001_001.PNG" alt="" style="width: 100%; height: 400px; opacity: 0.5" />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title texto_70">
            Guantes de ciclismo de dedos completos para hombres
          </h5>
          <p class="card-text texto_30">
            tela transpirable resistente al desgaste, almohadilla de gel
            absorbente de golpes, apto para montar en bicicleta de montaña en
            otoño e invierno, Color Azul y L.
          </p>
          <p class="card-text texto_white texto_70 align-self-center">
            $299.99
          </p>
          <button class="
                btn btn-outline-secondary
                my-2 my-sm-0
                texto_50
                boton_amarillo
                align-self-center
              ">
            Borrar
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="footer"></div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="assets/json/zapatillas.js"></script>
  <script src="assets/json/guantes.js"></script>
  <script>
     jQuery.get("./navbar2.html", function (data) {
      $("#nav-placeholder").replaceWith(data);
    });

    jQuery.get("./footer.html", function (data) {
      $("#footer").replaceWith(data);
    });

    const vercarrito = document.querySelector("#vercarrito");
    vercarrito.addEventListener("click", () => {
      let car= JSON.parse(localStorage.getItem("carrito"));
      car.forEach((e)=>{
        console.log(e.nombre);
      });
      generarTabla();
    });

    const limpiarcarrito = document.querySelector("#limpiarcarrito");
    limpiarcarrito.addEventListener("click", () => {
      localStorage.clear();
    });

    const tabla_carrito = document.querySelector("#tabla-carrito");
    function generarTabla() {
      tabla_carrito.textContent="";
      let carrito = JSON.parse(localStorage.getItem("carrito"));
      let tabla = document.createElement("table");
      let thead= document.createElement("thead");
      //Producto
      let producto= document.createElement("td");
      producto.appendChild(document.createTextNode("Producto"));
      producto.className+="texto_50 texto_amarillo pl-5 "
      //Cantidad
      let cantidad= document.createElement("td");
      cantidad.appendChild(document.createTextNode("Cantidad"));
      cantidad.className+="texto_50 texto_amarillo text-center"
      //Precio
      let precio= document.createElement("td");
      precio.appendChild(document.createTextNode("Precio"));
      precio.className+="texto_50 texto_amarillo text-center"
      //Total
      let total= document.createElement("td");
      total.appendChild(document.createTextNode("Total"));
      total.className+="texto_50 texto_amarillo text-center";
      //Eliminar
      let eliminar = document.createElement("td");
      eliminar.appendChild(document.createTextNode("Eliminar"));
      eliminar.className+="texto_50 texto_amarillo text-center";
      let filaEncabezado=document.createElement("tr");

      filaEncabezado.appendChild(producto);
      filaEncabezado.appendChild(cantidad);
      filaEncabezado.appendChild(precio);
      filaEncabezado.appendChild(total);
      filaEncabezado.appendChild(eliminar);
      thead.appendChild(filaEncabezado);
      tabla.appendChild(thead);
      tabla_carrito.appendChild(tabla);
      let tbody = document.createElement("tbody");
      carrito.forEach((element) => {
        let tr=document.createElement("tr");
        let tdProducto=document.createElement("td");
        tdProducto.className+=" font_footer_text"
        tdProducto.setAttribute("style", "font-size:5vh;");
        // Agregamos columna Producto
        let imgProducto= document.createElement("img");
        imgProducto.src = element.url;
        imgProducto.alt = element.nombre;
        imgProducto.setAttribute("style",
        "width:200px;heigth:100px; padding:35px");
        
        tdProducto.appendChild(imgProducto);
        tdProducto.appendChild(document.createTextNode(`${element.nombre}`));
        // Agregamos columna Cantidad
        let tdCantidad=document.createElement("td")
        let botonAgregar = document.createElement("button");
        let botonMenos = document.createElement("button");
        let cantidadProducto = 1;
        //Botón de menos cantidad
        botonMenos.appendChild(document.createTextNode(`-`));
        tdCantidad.appendChild(botonMenos);
        botonMenos.className +="boton_amarillo";
        botonMenos.setAttribute("style", "width:38%");
        tdCantidad.appendChild(document.createTextNode(`${cantidadProducto}`));
        tdCantidad.appendChild(botonAgregar);
        //Botón de más cantidad
        botonAgregar.appendChild(document.createTextNode(`+`));
        botonAgregar.className +="boton_amarillo text-center";
        botonAgregar.setAttribute("style", "width:38%");
        tdCantidad.className+="texto_30 font_footer_text text-center p-2";
        
        let tdPrecio=document.createElement("td");
        tdPrecio.className+="texto_30 font_footer_text p-5";
        tdPrecio.appendChild(document.createTextNode(`${Intl.NumberFormat().format(element.precio)}`));

        let tdTotal=document.createElement("td");
        tdTotal.s
        tdTotal.className+="texto_30 font_footer_text";
        tdTotal.appendChild(document.createTextNode(`${Intl.NumberFormat().format(element.precio * cantidadProducto)}`));
        
        let tdEliminar = document.createElement("td");
        tdEliminar.className+="texto_30 font_footer_text p-5";
        let buttonEliminar = document.createElement('button');
        buttonEliminar.className+="boton_amarillo";
        buttonEliminar.appendChild(document.createTextNode(`X`));
        buttonEliminar.addEventListener('click', () => {
            let carritoCompra=[];
            let carritoFinal2=localStorage.getItem("carrito");
            carritoCompra=JSON.parse(carritoFinal2);

            let carritoFinal=[];
            carritoCompra.forEach(function (task) {
              console.log(task.nombre, element.nombre);
              if(task.nombre!=element.nombre && task.descripcion!=element.descripcion){
                carritoFinal.push(task);
              }
            });
            localStorage.setItem("carrito",JSON.stringify(carritoFinal));
            generarTabla();
        });
        //Mostrar los datos del producto en la tabla
        tdEliminar.appendChild(buttonEliminar);
        tr.appendChild(tdProducto);
        tr.appendChild(tdCantidad);
        tr.appendChild(tdPrecio);
        tr.appendChild(tdTotal);
        tr.appendChild(tdEliminar);
        tbody.appendChild(tr);

        //Funcion de boton Agregar
        botonAgregar.addEventListener('click', ()  => {
              cantidadProducto++;
              tdCantidad.textContent="";
              tdTotal.textContent="";
              tdCantidad.appendChild(botonMenos);
              tdCantidad.appendChild(document.createTextNode(`${cantidadProducto}`));
              tdCantidad.appendChild(botonAgregar);
              tdTotal.appendChild(document.createTextNode(`${Intl.NumberFormat().format(element.precio * cantidadProducto)}`));
        });
        
        //Funcion de boton Menos
        botonMenos.addEventListener('click', ()  => {
          if(cantidadProducto > 1){
              cantidadProducto--;
              tdCantidad.textContent="";
              tdTotal.textContent="";
              tdCantidad.appendChild(botonMenos);
              tdCantidad.appendChild(document.createTextNode(`${cantidadProducto}`));
              tdCantidad.appendChild(botonAgregar)
              tdTotal.appendChild(document.createTextNode(`${Intl.NumberFormat().format(element.precio * cantidadProducto)}`));
          }
        });
      });
      tabla.appendChild(tbody);
    }

    function pintarTabla() {
      tabla_carrito.textContent="";
      let carrito = JSON.parse(localStorage.getItem("carrito"));
      let tabla = document.createElement("table");
      let thead= document.createElement("thead");
      let producto= document.createElement("td");
      producto.appendChild(document.createTextNode("Producto"));
      producto.className+="texto_50 texto_amarillo pl-5 "
      let cantidad= document.createElement("td");
      cantidad.appendChild(document.createTextNode("Cantidad"));
      cantidad.className+="texto_50 texto_amarillo text-center"
      let precio= document.createElement("td");
      precio.appendChild(document.createTextNode("Precio"));
      precio.className+="texto_50 texto_amarillo text-center"
      let total= document.createElement("td");
      total.appendChild(document.createTextNode("Total"));
      total.className+="texto_50 texto_amarillo text-center";
      let eliminar = document.createElement("td");
      eliminar.appendChild(document.createTextNode("Eliminar"));
      eliminar.className+="texto_50 texto_amarillo text-center";
      let filaEncabezado=document.createElement("tr");
      filaEncabezado.appendChild(producto);
      filaEncabezado.appendChild(cantidad);
      filaEncabezado.appendChild(precio);
      filaEncabezado.appendChild(total);
      filaEncabezado.appendChild(eliminar);
      thead.appendChild(filaEncabezado);
      tabla.appendChild(thead);
      tabla_carrito.appendChild(tabla);
      let tbody = document.createElement("tbody");
      carrito.forEach((element) => {
        let tr=document.createElement("tr");
        let tdProducto=document.createElement("td");
        tdProducto.className+=" font_footer_text"
        tdProducto.setAttribute("style", "font-size:5vh;");
        // Agregamos columna Producto
        let imgProducto= document.createElement("img");
        imgProducto.src = element.url;
        imgProducto.alt = element.nombre;
        imgProducto.setAttribute("style",
        "width:200px;heigth:100px; padding:35px");
        
        tdProducto.appendChild(imgProducto);
        tdProducto.appendChild(document.createTextNode(`${element.nombre}`));
        // Agregamos columna Cantidad
        let tdCantidad=document.createElement("td")
        let botonAgregar = document.createElement("button");
        let botonMenos = document.createElement("button");
        let cantidadProducto = 1;
        botonMenos.appendChild(document.createTextNode(`-`));
        tdCantidad.appendChild(botonMenos);
        botonMenos.className +="boton_amarillo";
        botonMenos.setAttribute("style", "width:38%"  );
        tdCantidad.appendChild(document.createTextNode(`${cantidadProducto}`));
        tdCantidad.appendChild(botonAgregar);
        botonAgregar.appendChild(document.createTextNode(`+`));
        botonAgregar.className +="boton_amarillo text-center";
        botonAgregar.setAttribute("style", "width:38%");
        tdCantidad.className+="texto_30 font_footer_text text-center p-2"
        botonAgregar.addEventListener('click', ()  => {
          cantidadProducto++;
        });
        botonMenos.addEventListener('click', ()  => {
          if(cantidadProducto > 1){
              cantidadProducto--;
          }
        });

        let tdPrecio=document.createElement("td");
        tdPrecio.className+="texto_30 font_footer_text p-5 "
        tdPrecio.appendChild(document.createTextNode(`${element.precio}`));
        let tdTotal=document.createElement("td");
        tdTotal.className+="texto_30 font_footer_text"
        tdTotal.appendChild(document.createTextNode(`${element.precio * cantidadProducto}`));
        
        let tdEliminar = document.createElement("td");
        tdEliminar.className+="texto_30 font_footer_text p-5";
        let buttonEliminar = document.createElement('button');
        buttonEliminar.className+="boton_amarillo";
        buttonEliminar.appendChild(document.createTextNode(`X`));
        buttonEliminar.addEventListener('click', () => {

        });
        tdEliminar.appendChild(buttonEliminar);
        tr.appendChild(tdProducto);
        tr.appendChild(tdCantidad);
        tr.appendChild(tdPrecio);
        tr.appendChild(tdTotal);
        tr.appendChild(tdEliminar);
        
        tbody.appendChild(tr);
      });
      tabla.appendChild(tbody);
    }
      
  
/*
<tbody>
  <tr>
    <td class="tg-0lax">a</td>
    <td class="tg-0lax">b</td>
    <td class="tg-0lax">cc</td>
    <td class="tg-0lax">d</td>
  </tr>
  <tr>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
  </tr>
  <tr>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
  </tr>
  <tr>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
    <td class="tg-0lax"></td>
  </tr>
</tbody>
</table>
*/
    

   

    
  </script>
</body>

</html>